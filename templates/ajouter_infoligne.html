<!DOCTYPE html>
{% extends 'base2.html' %}

{% load static %}

{% block head %}
{{ block.super }}
<script
    src="https://cdn.jsdelivr.net/npm/tempusdominus-bootstrap-4@5.39.0/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Date Time Picker CSS -->
<link rel="stylesheet" href="{% static 'date-time/jquery-ui.css' %}">
<link rel="stylesheet" href="{% static 'date-time/jquery-ui-timepicker-addon.css' %}" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/datetimepicker/jquery.datetimepicker.css">
<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/datetimepicker/jquery.datetimepicker.full.min.js"></script>
<!-- Inclure les fichiers CSS et JavaScript nécessaires -->
<link href="https://cdn.jsdelivr.net/npm/flatpickr@latest/dist/flatpickr.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/flatpickr@latest/dist/flatpickr.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-datetimepicker@4.17.47/build/css/bootstrap-datetimepicker.css">

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/min/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-datetimepicker@4.17.47/build/js/bootstrap-datetimepicker.min.js"></script>



<!-- Date Time Picker CSS -->
{% endblock head %}

{% block contenu %}
<div class="container">
    <br>

    <div class="card o-hidden border-0 shadow-lg my-5">
        <div class="card-body p-0">
            <h3 style="text-align: center;">Compagnie {{ comp.nom_cp }} </h3>
            <!-- Nested Row within Card Body -->
            {% if messages %}
            <ul class="messages" style="font-size: 15px;">
                {% for message in messages %}
                <li {% if message.tags %} class="{{ message.tags }}" {% endif %} style="font-size: 18px; color: red;">{{
                    message }}</li>
                {% endfor %}
            </ul>
            {% endif %}
            <div class="row">
                <div class="contact100-pic js-tilt col-lg-5 d-none d-lg-block">
                    <img src="{% static 'images/modele-formulaire-inscription.avif' %}" alt="IMG">
                </div>
                <div class="col-lg-7">
                    <div class="p-5">
                        <div class="text-center">
                            <h1 class="h4 text-black-900 mb-4">Créer un voyage!</h1>
                        </div>
                        <form class="user" method="post">
                            {% csrf_token %}
                            <div class="form-group" style="color: black;">
                                <div class="input-group date" id="datetimepicker" data-target-input="nearest">
                                    {{ form.date_dep }}

                                    <div class="input-group-append" data-target="#datetimepicker"
                                        data-toggle="datetimepicker">
                                        <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                                    </div>
                                </div>
                            </div>
                            <!-- Ajouter le code JavaScript pour activer le sélecteur de date et d'heure -->
                            <script>
                                flatpickr(".datetimepicker", {
                                    enableTime: true,
                                    dateFormat: "Y-m-d H:i",
                                    minDate: "today"
                                });
                            </script>
                            <!-- <script>
                                $(document).ready(function () {
                                    $('#id_date_dep').datetimepicker({
                                        format: 'Y-m-d H:i', // Format de date et d'heure
                                        minDate: 0, // Date minimale (aujourd'hui)
                                        step: 15 // Intervalles de 15 minutes
                                    });
                                });
                            </script> -->

                            <div class="form-group" style="color: black;">
                                {{ form.prix }}
                            </div>
                            <div class="form-group" style="color: black;">
                                {{ form.bus_id }}
                            </div>
                            <div class="form-group" style="color: black;">
                                {{ form.ligne_id }}
                            </div>
                            <div class="form-group" style="color: black;">
                                {{ form.place_restante }}
                            </div>

                            <input type="hidden" name="personnel_actif" value="True"> <!-- Champ personnel_actif -->
                            <button type="submit" class="btn btn-primary btn-user btn-block">Enregistrer</button>
                        </form>
                        <hr>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Date Time Picker JS -->
<script src="{% static 'date-time/jquery-ui.js' %}"></script>
<script src="{% static 'date-time/jquery-ui-timepicker-addon.js' %}"></script>
<script>
    $(function () {
        $("#datetimepicker").datetimepicker({ dateFormat: 'yy-mm-dd', maxDate: 0, controlType: 'select' }).attr("autocomplete", "off");
    });
</script>
<!-- Date Time Picker JS -->
{% endblock contenu %}